{% extends 'base.html' %} {% block content %}
<!-- add_more_details_to_profile.html -->
<section class="section dashboard">
  <div class="row">
    <!-- Left side columns -->
    <div class="col-lg-8">
      <div class="row">
        <!-- Sales Card -->

        <!-- End Sales Card -->

        <!-- Revenue Card -->
        <!-- End Revenue Card -->

        <!-- Customers Card -->

        <!-- End Customers Card -->
        <!-- Reports -->
        <!-- Dashboard template -->
        <!-- Add this button inside the current_dream_of_user block -->

        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">
                What is your current dream/short term goal?
              </h5>
              <form method="POST" action="/AddDreamFormView">
                {% csrf_token %} {{ form_1.as_p }}
                <button type="submit" class="btn btn-primary m-1">
                  {% if current_dream_of_user.title == "" %} Add Dream
                  {% else %} Save Dream {% endif %} 
                </button>
                {% if current_dream_of_user.title != "" %}
                <button type="button" class="btn btn-outline-success m-1" data-bs-toggle="modal" data-bs-target="#exampleModal">
                  Dream Achieved
                </button>
                <button type="button" class="btn btn-outline-danger m-1" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                  Discard Dream
                </button>
                {% endif %}
              </form>
              <!-- Button trigger modal -->

              <!-- Line Chart -->

              <!-- End Line Chart -->
            </div>
          </div>
        </div>
        <!-- End Reports -->
       
        <!-- End Recent Sales -->
        
        {% if current_dream_of_user.achieved == True %}
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Download Goal Report</h5>
              <p>Download a report of your goal achievement journey.</p>
              <a href="{% url 'download_report' %}" class="btn btn-success">Download Report</a>
            </div>
          </div>
        </div>
        {% endif %}
        
      </div>
    </div>
    <!-- End Left side columns -->

    <!-- Right side columns -->
    <div class="col-lg-4">
      <!-- Recent Activity -->
      <div class="card">
        <!-- <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"
            ><i class="bi bi-three-dots"></i
          ></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div> -->

        <div class="card-body">
          <h5 class="card-title">Todos with today's deadline</h5>

          <div class="activity">
            {% if todos %} {% for todo in todos %}
            <div class="activity-item d-flex">
              <div class="activite-label">{{ todo.duedate }}</div>
              <i
                class="bi bi-circle-fill activity-badge text-success align-self-start"
              ></i>
              <div class="activity-content">
                {{ todo.title }}
                <a href="{% url 'todos' %}" class="fw-bold text-dark">view</a>
              </div>
            </div>
            <!-- End activity item-->
            {% endfor %} {% else %}
            <div class="activity-item d-flex">
              <div class="activity-content">No todos with today's deadline</div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      <!-- End Recent Activity -->

      <!-- Budget Report -->
      <div class="card">
        <!-- <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"
            ><i class="bi bi-three-dots"></i
          ></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div> -->

        <div class="card-body">
          <h5 class="card-title">Upcoming events</h5>
          <div class="activity">
            {% if events %} {% for event in events %}
            <div class="activity-item d-flex">
              <div class="activite-label">{{ event.enddate }}</div>
              <i
                class="bi bi-circle-fill activity-badge text-success align-self-start"
              ></i>
              <div class="activity-content">
                {{ event.name }}
                <a href="{% url 'events' %}" class="fw-bold text-dark">view</a>
              </div>
            </div>
            <!-- End activity item-->
            {% endfor %} {% else %}
            <div class="activity-item d-flex">
              <div class="activity-content">No upcoming events</div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      <!-- End Budget Report -->

      <!-- End News & Updates -->
    </div>
    <!-- End Right side columns -->
  </div>
</section>



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Do you feel like you achieved your dream?</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% if current_dream_of_user == "" %}
        <p>your dream is null</p>
        {% else %}
        
        <form method="POST" action="/DreamAchievedFormView">
          {% csrf_token %} {{ form_2.as_p }}
          <button type="submit" class="btn btn-primary">
            Save Dream
          </button>
        </form>
        {% endif %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Discard Dream</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% if current_dream_of_user %}
        <p>
          Do you feel like current dream is not worth pursuing and wish to
          startover?
        </p>
        <form method="POST" action="{% url 'discard_dream' %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">
            Discard Dream
          </button>
        </form>
        {% endif %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}
